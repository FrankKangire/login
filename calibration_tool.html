<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calibration Tool - Jungle Professor</title>
    <style>
        :root { --board-size: 80vh; }
        body { font-family: sans-serif; display: flex; background: #222; color: white; margin: 0; padding: 20px; }
        
        /* THE BOARD */
        .game-wrapper {
            position: relative;
            width: var(--board-size);
            aspect-ratio: 1 / 1;
            background-image: url("./jungle professor board/IMG-20240301-WA0006.jpg");
            background-size: 100% 100%;
            border: 5px solid #444;
            cursor: crosshair;
        }

        /* THE TEST PIECE */
        .player {
            position: absolute;
            width: 5%; height: 5%;
            border-radius: 50%; border: 2px solid black;
            background: red;
            transform: translate(-50%, -50%); /* Centers the piece on the click point */
            pointer-events: none; /* Allows clicking "through" the piece */
        }

        /* CALIBRATION UI */
        .sidebar { width: 350px; padding: 20px; overflow-y: auto; height: 90vh; background: #333; margin-left: 20px; border-radius: 10px; }
        .coord-item { background: #444; padding: 5px 10px; margin-bottom: 5px; font-family: monospace; font-size: 0.9rem; border-left: 4px solid #27ae60; }
        h3 { margin-top: 0; color: #27ae60; }
        .btn-reset { background: #e74c3c; color: white; border: none; padding: 10px; cursor: pointer; width: 100%; border-radius: 5px; }
    </style>
</head>
<body>

    <div class="game-wrapper" id="board">
        <div id="test-piece" class="player" style="left: 50%; top: 50%;"></div>
    </div>

    <div class="sidebar">
        <h3>Tile Calibrator</h3>
        <p>1. Click on Tile 0 (Start)<br>2. Click Tile 1, 2, 3 in order...<br>3. Copy the code below when done.</p>
        <button class="btn-reset" onclick="location.reload()">Reset / Clear All</button>
        <hr>
        <div id="coord-list"></div>
        <hr>
        <h4>Generated Object:</h4>
        <pre id="final-code">const tileCoords = {</pre>
    </div>

    <script>
        const board = document.getElementById('board');
        const piece = document.getElementById('test-piece');
        const coordList = document.getElementById('coord-list');
        const finalCode = document.getElementById('final-code');
        let tileCount = 0;

        board.addEventListener('mousedown', function(e) {
            // Calculate % based on where you clicked inside the board
            const rect = board.getBoundingClientRect();
            const x = e.clientX - rect.left;
            const y = e.clientY - rect.top;

            const leftPerc = ((x / rect.width) * 100).toFixed(2);
            const topPerc = ((y / rect.height) * 100).toFixed(2);

            // Move the piece visually
            piece.style.left = leftPerc + "%";
            piece.style.top = topPerc + "%";

            // Add to the list
            const item = document.createElement('div');
            item.className = 'coord-item';
            item.innerText = `Tile ${tileCount}: L:${leftPerc}% T:${topPerc}%`;
            coordList.prepend(item);

            // Append to the code block
            finalCode.innerText += `\n    ${tileCount}: { left: '${leftPerc}%', top: '${topPerc}%' },`;

            tileCount++;
        });
    </script>
</body>
</html>